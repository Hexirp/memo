# モナド

Monadの学習過程の一例を示す。

## Haskellとの接触

WikipediaからHaskellを知る。
どうやらJavaとだいぶ違う言語のようだ。
へえ、入出力がIOモナドとやらでできる？
モナドは…色々あるみたいだけど、returnとbindがあるのか。

## コンテナ

Maybeモナドやリストモナド、Eitherモナド、Identityモナドを知る。
共通点を見つけたぞ。すべてコンテナだ！
IOモナドはなんだろうか…外部の値で汚れていることを示すコンテナだ。
きっとその中身はIdentityモナドと同じであるに違いない。

## 関数

WriterモナドやReaderモナド、Stateモナドを知る。
これがコンテナ？
IOモナドもStateモナドの特殊な版らしいし…Stateモナドが重要だとブログとかはいってるから実際に書いてみよう。
なるほど、Monadは上から下へ実行するものだ。

## 自由

FreeモナドやFreer(Operational, Skeleton)モナドを知る。
なんだ？これは入れ子になってて見づらい。
ふーむ、なるほど、これは実行を遅延するものだ。最終的には実行する。

## 継続

継続モナドを知る。
なんだ？これは！途中で中断できる。リソース管理ができる。バックトラックが出来る。
継続渡しスタイルで関数を書いてみた。継続渡しスタイルは理解できた。
でも、まだ何かが分からないぞ…そうだ、do記法の中では継続渡しスタイルが暗黙的に行われるわけだけど、それはどんなものなんだ？
そうだ！継続モナドは上から下へ値を渡すんじゃない。下から上へ継続を渡すんだ！
つまり、モナドは…計算っぽいもの？

## 圏論

モナドは圏論で定義されているらしい。
モナド則というものがあるらしい。Functorをベースにしているらしい。
圏について知る必要がある。HaskellではCategoryというものがある。
対象と射があるらしい。対象は型として、射は関数なんだから、aからbへの射は`a -> b`という型のことかな？
いや、それではすべての対象の間に射があることになってしまう。さらに対象の間に一つの関数しか存在しえない。
なるほど、圏はわかって、関手も分かった。対象の変換はfという型で、射の変換はfmapという値だ。
Monadは…自己関手の圏のモノイド対象？モノイダル圏というのが大事らしい。
なるほど、これにおいての積は関手の合成で、Haskellでは`newtype Compose f g a = Compose (f (g a))`だ。
Functorであることは前提の前提、`Identity -> m`と`m ∘ m -> m`が大事というわけか。

## 最後に

ここで示したことは、現実ではダイナミックに順序が前後したり同時進行していたりするので注意すべし。
